<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets">

<h:head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</h:head>

<h:body>
	<ui:composition template="/XHTML/homedashboard.xhtml">

		<ui:define name="body">
			<f:view>
				<p:ajaxStatus onstart="PF('statusDialog').show()"
					onsuccess="PF('statusDialog').hide()" />
				<p:dialog modal="true" widgetVar="statusDialog" header="Loading"
					draggable="false" closable="false">
					<p:graphicImage
						value="#{facesContext.externalContext.request.scheme}://#{facesContext.externalContext.request.serverName}:#{facesContext.externalContext.request.serverPort}#{facesContext.externalContext.request.contextPath}/images/ajaxloadingbar.gif" />
				</p:dialog>

				<!-- Expired session -->
				<p:idleMonitor onactive="PF('sessionTimeOutDialog').show();"
					timeout="#{session.maxInactiveInterval * 100}" />
				<p:dialog modal="true" widgetVar="sessionTimeOutDialog"
					header="Expired session" draggable="false" closable="false">
					<h:outputText value="The session is finished" />
					<input id="confirmBackToLogin" type="button" value="Sign in"
						onclick="window.location='#{facesContext.externalContext.requestContextPath}/index.jsp';" />
				</p:dialog>

				<h:form id="frm">

					<p:panel id="panelDataTableDatTransProd"
						header="Registros de producción">
						<!-- <p:growl id="men"/>	 -->
						
						<p:panelGrid>
							<p:row>
								<p:column>
									<h:panelGrid columns="2">
									
										<p:outputLabel for="txtFechaIni" value="F. Inicial: "
											style="font-size: 0.9em;" />
										<p:calendar id="txtFechaIni" showOn="button" navigator="false"
											locale="es" pattern="dd/MM/yyyy" mask="true"
											style="font-size: 0.9em;" size="12"
											binding="#{datTransProdView.txtFechaIni}"
											required="false"
											requiredMessage="La Fecha inicial es obligatoria">
										</p:calendar>

										<p:outputLabel for="txtFechaFin" value="F. Final: "
											style="font-size: 0.9em;" />
										<p:calendar id="txtFechaFin" showOn="button" navigator="false"
											locale="es" pattern="dd/MM/yyyy" mask="true"
											style="font-size: 0.9em;" size="12"
											binding="#{datTransProdView.txtFechaFin}"
											required="false"
											requiredMessage="La Fecha  final  es obligatoria">
										</p:calendar>
										
									</h:panelGrid>
								</p:column>
								
								<p:column>
									<h:panelGrid columns="2">

										<p:outputLabel for="txtPlanilla" value="n° Planilla "
											style="font-size: 0.9em;" />
										<p:inputNumber id="txtPlanilla" style="font-size: 0.9em;"
											binding="#{datTransProdView.txtPlanilla}"
											maxlength="1000" autoResize="true" size="15"/>

									</h:panelGrid>
								</p:column>

								<p:column>
									<h:panelGrid columns="1">

										<p:commandButton id="btnCargarDatos" value="Consultar"
											icon="ui-icon-newwin" style="font-size: 1em;"
											action="#{datTransProdView.listarProduccion}"
											update=":frm:tbl" process="@all" />
											
									</h:panelGrid>
								</p:column>
							</p:row>
						</p:panelGrid>
						
						<p:dataTable id="tbl" value="#{datTransProdView.data}"
							var="datTransProd" paginator="true" lazy="true" rows="5"
							rowsPerPageTemplate="5,10,15" reflow="true">
							<f:facet name="header">
								<div align="right">

									<h:commandLink id="excel" style=" margin-right:15px;">
										<p:graphicImage
											value="#{facesContext.externalContext.request.scheme}://#{facesContext.externalContext.request.serverName}:#{facesContext.externalContext.request.serverPort}#{facesContext.externalContext.request.contextPath}/images/xls.png"
											width="30" />
										<p:dataExporter type="xls" target="tbl"
											fileName="datTransProd" />
									</h:commandLink>
									<p:tooltip id="toolTipFade" for="excel"
										value="Exportar todos los datos a Excel" />
								</div>
							</f:facet>


							<p:column filterBy="#{datTransProd.consecutivo}"
								sortBy="#{datTransProd.consecutivo}">
								<f:facet name="header">
									<h:outputText value="Consecutivo" />
								</f:facet>
								<h:outputText value="#{datTransProd.consecutivo}" />
							</p:column>

							<p:column filterBy="#{datTransProd.fechaRegistro}"
								sortBy="#{datTransProd.fechaRegistro}">
								<f:facet name="header">
									<h:outputText value="Fecha de registro" />
								</f:facet>
								<h:outputText value="#{datTransProd.fechaRegistro}" />
							</p:column>

							<p:column filterBy="#{datTransProd.tipoTransaccion}"
								sortBy="#{datTransProd.tipoTransaccion}">
								<f:facet name="header">
									<h:outputText value="Tipo Transacción" />
								</f:facet>
								<h:outputText value="#{datTransProd.tipoTransaccion}" />
							</p:column>


							<p:column headerText="Opciones" exportable="false">
								<div align="center">
									<p:commandButton id="btnEdit" value="Editar" icon="ui-icon-pencil"
										update=":dialogDatTransProd"
										disabled="#{datTransProd.estadoTrue}"
										actionListener="#{datTransProdView.action_edit}">
										<f:attribute name="selectedDatTransProd"
											value="#{datTransProd}" />
									</p:commandButton>
									<p:commandButton id="btnDelete"
										disabled="#{datTransProd.estadoTrue}" title="Anular Registro"
										actionListener="#{datTransProdView.action_anularReg}"
										icon="ui-icon-circle-close" update=":dialogAnularReg">
										<f:attribute name="selectedDatTransProd"
											value="#{datTransProd}" />
									</p:commandButton>
								</div>
							</p:column>

						</p:dataTable>
					</p:panel>
					<p:panel id="panelBoton">
						<div align="center">
							<p:commandButton id="btnNew" value="Nuevo" icon="ui-icon-newwin"
								action="#{datTransProdView.action_new()}"
								update=":dialogDatTransProd" />
						</div>
					</p:panel>
				</h:form>
				<p:dialog id="dialogDatTransProd" appendTo="@(body)"
					draggable="true" closable="true"
					visible="#{datTransProdView.showDialog}" resizable="false"
					modal="true" width="1000" styleClass="dialogFix"
					header="Registros de producción" responsive="true">
					<h:form id="formDialog">
						<p:messages id="msg" closable="true" />
						<p:panel id="panelDatTransProd">

							<p:tabView id="tabMapa"
								activeIndex="#{datTransProdView.activeTapIndex}">

								<p:tab title="General">

									<h:panelGrid columns="2" id="panelGrid2">

										<p:outputLabel value="# Consecutivo: "
											style="font-size: 0.8em;" />
										<p:inputText id="txtConsecutivo" disabled="false"
											binding="#{datTransProdView.txtConsecutivo}"
											style="font-size: 0.8em;"
											placeholder="Buscar o crear registro" size="23">
										</p:inputText>

										<p:outputLabel for="msgInicial" value="Fecha Ini Cosecha: "
											style="font-size: 0.8em;" />
										<p:calendar id="msgInicial" showOn="button" navigator="false"
											style="font-size: 0.8em;" locale="es"
											binding="#{datTransProdView.txtFechaInicial}"
											pattern="dd/MM/yyyy" mask="true" required="true"
											requiredMessage="La Fecha inicial  es obligatoria">
										</p:calendar>

										<p:outputLabel for="msgFechaFinal" value="Fecha Fin Cosecha: "
											style="font-size: 0.8em;" />
										<p:calendar id="msgFechaFinal" showOn="button"
											style="font-size: 0.8em;" navigator="false" locale="es"
											binding="#{datTransProdView.txtFechaRegistro}"
											pattern="dd/MM/yyyy" mask="true" required="true"
											requiredMessage="La Fecha  final es obligatoria">
										</p:calendar>


										<p:outputLabel for="txtTipoTransaccion" value="Transacción:"
											style="font-size: 0.8em;" />
										<p:selectOneMenu id="txtTipoTransaccion" disabled="true"
											style="font-size: 0.8em;"
											binding="#{datTransProdView.selectTipoTransaccion}"
											required="true" requiredMessage="Seleccione una transacción">
											<f:selectItem itemLabel="Producción" itemValue="Producción" />
										</p:selectOneMenu>


									</h:panelGrid>

									<p:panelGrid>


										<p:column>
											<h:panelGrid columns="2">

												<p:outputLabel for="txtCantidadKilosLiq" value="Kilos(Kg): "
													style="font-size: 0.8em;" />
												<p:spinner id="txtCantidadKilosLiq" disabled="true"
													binding="#{datTransProdView.txtCantidadKilosLiq}"
													style="font-size: 0.8em;" required="false"
													requiredMessage="Indique el valor unitario">
													<f:converter converterId="javax.faces.Double" />
												</p:spinner>


												<p:outputLabel for="txtValorUnitario"
													value="Valor unitario: " style="font-size: 0.8em;" />
												<p:spinner id="txtValorUnitario" disabled="true"
													binding="#{datTransProdView.txtValorUnitario}"
													style="font-size: 0.8em;" required="false"
													stepFactor="0.25" min="0" max="9999999999" prefix="$"
													requiredMessage="Indique el valor unitario">
												</p:spinner>

												<p:outputLabel for="txtValorTotal" value="Costo total: "
													style="font-size: 0.8em;" />
												<p:panelGrid columns="2">
													<p:spinner id="txtValorTotal" style="font-size: 0.8em;"
														binding="#{datTransProdView.txtValorTotal}" disable="true"
														stepFactor="0.25" min="0" max="9999999999" prefix="$">
													</p:spinner>
													<p:commandButton icon="ui-icon-calculator" value="Calcular">
														<p:ajax
															process="@this,txtValorUnitario,txtCantidadKilosLiq"
															update="txtValorTotal"
															listener="#{datTransProdView.listener_calcularCostoTotal}" />
													</p:commandButton>
												</p:panelGrid>


											</h:panelGrid>
										</p:column>

										<p:column>
											<h:panelGrid columns="2">
												<p:outputLabel for="txtTranspId_Transportadora"
													style="font-size: 0.8em;" value="Transportadora: " />
												<p:selectOneMenu id="txtTranspId_Transportadora"
													effect="fade" filter="true" filterMatchMode="contains"
													autoWidth="false"
													binding="#{datTransProdView.txtTranspId_Transportadora}"
													style="width: 100%;font-size: 0.8em;" required="false"
													requiredMessage="Seleccione una transportadora">
													<f:selectItem itemLabel="Seleccione una transportadora"
														itemValue="" />
													<f:selectItems
														value="#{datTransProdView.selectTransportadora}" />
												</p:selectOneMenu>

												<p:outputLabel for="txtVehiTranspId_VehiculosTransp"
													style="font-size: 0.8em;" value="Vehiculo: " />
												<p:selectOneMenu id="txtVehiTranspId_VehiculosTransp"
													autoWidth="false" effect="fade" filter="true"
													filterMatchMode="contains"
													binding="#{datTransProdView.txtVehiTranspId_VehiculosTransp}"
													style="width: 100%;font-size: 0.8em;" required="false"
													requiredMessage="Seleccione un vehiculo">
													<f:selectItem itemLabel="Seleccione un vehiculo"
														itemValue="" />
													<f:selectItems
														value="#{datTransProdView.selectVehiculosTransp}" />
													<p:ajax process="@this,txtVehiTranspId_VehiculosTransp"
														update="txtConductorId_Conductor"
														listener="#{datTransProdView.listener_ConsultaConductor}" />
												</p:selectOneMenu>

												<p:outputLabel for="txtConductorId_Conductor"
													style="font-size: 0.8em;" value="Conductor: " />
												<p:selectOneMenu id="txtConductorId_Conductor" effect="fade"
													autoWidth="false" filter="true" filterMatchMode="contains"
													binding="#{datTransProdView.txtConductorId_Conductor}"
													style="width: 100%;font-size: 0.8em;" required="false"
													requiredMessage="Seleccione un conductor">
													<f:selectItem itemLabel="Seleccione un conductor"
														itemValue="" />
													<f:selectItems value="#{datTransProdView.selectConductor}" />
												</p:selectOneMenu>

											</h:panelGrid>
										</p:column>


									</p:panelGrid>

									<h:panelGrid columns="2">
										<p:outputLabel for="txtObservacion" value="Observación:" />
										<p:inputTextarea id="txtObservacion"
											binding="#{datTransProdView.txtObservacion}" rows="3"
											cols="30" maxlength="100" counterTemplate="{0} Caracteres"
											autoResize="true" />
										<h:outputText />

										<!-- id auto incrementable -->
										<p:inputText style="visibility:hidden" id="txtDatTransProdId"
											binding="#{datTransProdView.txtDatTransProdId}">

										</p:inputText>


									</h:panelGrid>

								</p:tab>

								<p:tab title="Producción">
									<p:panelGrid>
										<p:row>
											<p:column>
												<h:panelGrid columns="2" id="gridDetTransProdNivel4">


													<p:outputLabel for="txtDestinoProduccion"
														style="font-size: 0.8em;"
														value="Destino de la producción: " />
													<p:selectOneMenu id="txtDestinoProduccion"
														binding="#{datTransProdView.txtDestinoProduccion}"
														required="false"
														style="font-size: 0.8em;"
														requiredMessage="Seleccione un destino">
														<f:selectItem itemLabel="Seleccione un destino"
															itemValue="" />
														<f:selectItem itemLabel="Fábrica" itemValue="Fábrica" />
														<f:selectItem itemLabel="Venta" itemValue="Venta" />
														<f:selectItem itemLabel="Semilla" itemValue="Semilla" />
														<f:selectItem itemLabel="Otros" itemValue="Otros" />
													</p:selectOneMenu>


													<p:outputLabel for="txtClienteNivel4" value="Cliente: "
														style="font-size: 0.8em;" />
													<p:selectOneMenu id="txtClienteNivel4" effect="fade"
														autoWidth="false" filter="true" filterMatchMode="contains"
														style="width: 170px;font-size: 0.8em;"
														binding="#{datTransProdView.txtClienteNivel4}"
														required="false" requiredMessage="Seleccione un cliente">
														<f:selectItem itemLabel="Seleccione un cliente"
															itemValue="" />
														<f:selectItems
															value="#{datTransProdView.selectClienteNivel4}" />
													</p:selectOneMenu>


												</h:panelGrid>
											</p:column>

											<p:column>
												<h:panelGrid columns="2">

													<p:outputLabel for="txtProducto" value="Producto: "
														style="font-size: 0.8em;" />
													<p:selectOneMenu id="txtProducto" effect="fade"
														filter="true" filterMatchMode="contains"
														binding="#{datTransProdView.txtProducto}"
														style="width: 160px;font-size: 0.8em;" required="false"
														autoWidth="false" requiredMessage="Seleccione un producto">
														<f:selectItem itemLabel="Seleccione un producto"
															itemValue="" />
														<f:selectItems
															value="#{datTransProdView.selectProductoId}" />
													</p:selectOneMenu>


													<p:outputLabel for="txtModalidadCosId_ModalidadCosecha"
														value="Tipo de cosecha: " style="font-size: 0.8em;" />
													<p:selectOneMenu id="txtModalidadCosId_ModalidadCosecha"
														effect="fade" filter="true" filterMatchMode="contains"
														binding="#{datTransProdView.txtModalidadCosId_ModalidadCosecha}"
														style="width: 160px;font-size: 0.8em;" required="false"
														autoWidth="false" requiredMessage="Seleccione un tipo">
														<f:selectItem itemLabel="Seleccione un tipo" itemValue="" />
														<f:selectItems
															value="#{datTransProdView.selectModalidadCosecha}" />
													</p:selectOneMenu>

												</h:panelGrid>
											</p:column>

											<p:column>
												<h:panelGrid columns="2">


													<p:outputLabel for="txtNumeroViajes"
														style="font-size: 0.8em;" value="Número de viajes: " />
													<p:spinner id="txtNumeroViajes" disabled="true"
														binding="#{datTransProdView.txtNumeroViajes}" size="6"
														required="false" style="font-size: 0.8em;" min="0"
														max="100"
														requiredMessage="Indique la cantidad de viajes realizados">
													</p:spinner>

													<p:outputLabel for="txtVagonId" value="Vagón: "
														style="font-size: 0.8em;" />
													<p:selectOneMenu id="txtVagonId" effect="fade"
														filter="true" filterMatchMode="contains"
														binding="#{datTransProdView.txtVagonId}"
														style="width: 100%;font-size: 0.8em;" required="false"
														autoWidth="false" requiredMessage="Seleccione un vagón">
														<f:selectItem itemLabel="Seleccione un vagón" itemValue="" />
														<f:selectItems value="#{datTransProdView.selectVagon}" />
													</p:selectOneMenu>

												</h:panelGrid>
											</p:column>


										</p:row>
									</p:panelGrid>



									<p:panelGrid>
										<p:row>
											<p:column>
												<h:panelGrid columns="2">
													<p:outputLabel for="txtNivel1Id" value="Zona: "
														style="font-size: 0.8em;" />
													<p:selectOneMenu id="txtNivel1Id" effect="fade"
														filter="true" filterMatchMode="contains"
														style="width: 80%;font-size: 0.8em;" autoWidth="false"
														binding="#{datTransProdView.txtNivel1Id}" required="false"
														requiredMessage="Seleccione una zona">
														<f:selectItem itemLabel="Seleccione una zona" itemValue="" />
														<f:selectItems value="#{datTransProdView.selectNivel1}" />
														<p:ajax update="txtNivel2Id" />
													</p:selectOneMenu>

													<p:outputLabel for="txtNivel2Id" value="Hacienda: "
														style="font-size: 0.8em;" />
													<p:selectOneMenu id="txtNivel2Id" effect="fade"
														filter="true" filterMatchMode="contains"
														style="width: 80%;font-size: 0.8em;" autoWidth="false"
														binding="#{datTransProdView.txtNivel2Id}" required="false"
														requiredMessage="Seleccione una hacienda">
														<f:selectItem itemLabel="Seleccione una hacienda"
															itemValue="" />
														<f:selectItems value="#{datTransProdView.selectNivel2}" />
														<p:ajax update="txtNivel3Id" />
													</p:selectOneMenu>

													<p:outputLabel for="txtNivel3Id" value="Bloque: "
														style="font-size: 0.8em;" />
													<p:selectOneMenu id="txtNivel3Id" effect="fade"
														filter="true" filterMatchMode="contains"
														style="width: 80%;font-size: 0.8em;" autoWidth="false"
														binding="#{datTransProdView.txtNivel3Id}" required="false"
														requiredMessage="Seleccione un bloque del cultivo">
														<f:selectItem itemLabel="Seleccione un bloque"
															itemValue="" />
														<f:selectItems value="#{datTransProdView.selectNivel3}" />
														<p:ajax update="txtNivel4Id_Nivel4" />
													</p:selectOneMenu>

													<p:outputLabel for="txtNivel4Id_Nivel4" value="Lote: "
														style="font-size: 0.8em;" />
													<p:selectOneMenu id="txtNivel4Id_Nivel4" effect="fade"
														filter="true" filterMatchMode="contains" autoWidth="false"
														binding="#{datTransProdView.txtNivel4Id_Nivel4}"
														style="width: 80%;font-size: 0.8em;" required="false"
														requiredMessage="Seleccione un lote">
														<f:selectItem itemLabel="Seleccione un lote" itemValue="" />
														<f:selectItems value="#{datTransProdView.selectNivel4}" />
														<p:ajax
															listener="#{datTransProdView.listener_ConsultaAreaNivel4}"
															update="txtAreaCosechada, txtVariedNivel4, txtEtapaNivel4" />
													</p:selectOneMenu>

													<p:outputLabel for="txtVariedNivel4" value="Variedad: "
														style="font-size: 0.8em;" />
													<p:selectOneMenu id="txtVariedNivel4"
														style="width: 80%;font-size: 0.8em;"
														binding="#{datTransProdView.txtVariedNivel4}"
														filter="true" filterMatchMode="contains" required="false"
														autoWidth="false"
														requiredMessage="Seleccione una variedad">
														<f:selectItem itemLabel="Seleccione una variedad"
															itemValue="" />
														<f:selectItems
															value="#{datTransProdView.selectItemVariedad}" />

													</p:selectOneMenu>

													<p:outputLabel></p:outputLabel>
													<p:outputLabel></p:outputLabel>

												</h:panelGrid>
											</p:column>

											<p:column>
												<h:panelGrid columns="2">

													<p:outputLabel for="txtEtapaNivel4" value="# Cosechas: "
														style="font-size: 0.8em;" />
													<p:selectOneMenu id="txtEtapaNivel4"
														binding="#{datTransProdView.txtEtapaNivel4}" filter="true"
														filterMatchMode="contains" required="false"
														style="font-size: 0.8em;" autoWidth="false"
														requiredMessage="Seleccione una etapa">
														<f:selectItem itemLabel="Seleccione una etapa"
															itemValue="" />
														<f:selectItems value="#{datTransProdView.selectItemEtapa}" />

													</p:selectOneMenu>

													<p:outputLabel for="txtEdadNivel4"
														style="font-size: 0.8em;" value="Edad Cosecha: " />
													<p:inputText id="txtEdadNivel4" disabled="true"
														binding="#{datTransProdView.txtEdadNivel4}"
														required="false" style="font-size: 0.8em;" size="8"
														requiredMessage="Indique la edad de cosecha">
														<f:converter converterId="javax.faces.Double" />
													</p:inputText>


													<p:outputLabel for="txtAreaCosechada"
														style="font-size: 0.8em;" value="Área cosechada: " />
													<p:inputText id="txtAreaCosechada" disabled="true"
														binding="#{datTransProdView.txtAreaCosechada}"
														required="false" style="font-size: 0.8em;" size="8"
														requiredMessage="Indique el área cosechada">
														<f:converter converterId="javax.faces.Double" />
													</p:inputText>


													<p:outputLabel for="txtCantidadCosechada"
														style="font-size: 0.8em;"
														value="Cantidad cosechada(Ton): " />
													<p:inputText id="txtCantidadCosechada" disabled="true"
														binding="#{datTransProdView.txtCantidadCosechada}"
														required="false" style="font-size: 0.8em;" size="8"
														requiredMessage="Indique el área cosechada">
														<f:converter converterId="javax.faces.Double" />
													</p:inputText>


													<p:outputLabel for="txtCantidadCosechadaHa" value="Ton/Ha "
														style="font-size: 0.8em;" />
													<p:panelGrid columns="2">
														<p:inputText id="txtCantidadCosechadaHa"
															style="font-size: 0.8em;" size="8"
															binding="#{datTransProdView.txtCantidadCosechadaHa}"
															disable="true">
															<f:converter converterId="javax.faces.Double" />
														</p:inputText>
														<p:commandButton icon="ui-icon-calculator"
															value="Calcular">
															<p:ajax
																process="@this,txtAreaCosechada,txtCantidadCosechada"
																update="txtCantidadCosechadaHa"
																listener="#{datTransProdView.listener_calcularTonHa}" />
														</p:commandButton>
													</p:panelGrid>


													<p:outputLabel for="txtCantidadCosechadaHaMes"
														value="Ton/Ha/Mes " style="font-size: 0.8em;" />
													<p:panelGrid columns="2">
														<p:inputText id="txtCantidadCosechadaHaMes"
															style="font-size: 0.8em;" size="8"
															binding="#{datTransProdView.txtCantidadCosechadaHaMes}"
															disable="true">
															<f:converter converterId="javax.faces.Double" />
														</p:inputText>
														<p:commandButton icon="ui-icon-calculator"
															value="Calcular">
															<p:ajax
																process="@this,txtAreaCosechada,txtCantidadCosechada, txtEdadNivel4"
																update="txtCantidadCosechadaHaMes"
																listener="#{datTransProdView.listener_calcularTonHaMes}" />
														</p:commandButton>
													</p:panelGrid>

												</h:panelGrid>
											</p:column>

											<p:column>
												<h:panelGrid columns="2">


													<p:outputLabel for="txtPorcMateriaExtrana"
														style="font-size: 0.8em;" value="%Materia extraña: " />
													<p:inputText id="txtPorcMateriaExtrana" disabled="true"
														binding="#{datTransProdView.txtPorcMateriaExtrana}"
														required="false" style="font-size: 0.8em;" size="6"
														requiredMessage="Indique el %materia extraña">
														<f:converter converterId="javax.faces.Double" />
													</p:inputText>

													<p:outputLabel for="txtPorcSacarosa"
														style="font-size: 0.8em;" value="%Sacarosa: " />
													<p:inputText id="txtPorcSacarosa" disabled="true"
														binding="#{datTransProdView.txtPorcSacarosa}"
														required="false" style="font-size: 0.8em;" size="6"
														requiredMessage="Indique el %sacarosa">
														<f:converter converterId="javax.faces.Double" />
													</p:inputText>

													<p:outputLabel for="txtPorcRendimiento"
														style="font-size: 0.8em;" value="Rendimiento: " />
													<p:inputText id="txtPorcRendimiento" disabled="true"
														binding="#{datTransProdView.txtPorcRendimiento}"
														required="false" style="font-size: 0.8em;" size="6"
														requiredMessage="Indique el rto">
														<f:converter converterId="javax.faces.Double" />
													</p:inputText>

													<p:outputLabel for="txtKilosPorTonelada"
														style="font-size: 0.8em;" value="Kg/Ton " />
													<p:inputText id="txtKilosPorTonelada" disabled="true"
														binding="#{datTransProdView.txtKilosPorTonelada}"
														required="false" style="font-size: 0.8em;" size="6"
														requiredMessage="Indique Kg/Ton">
														<f:converter converterId="javax.faces.Double" />
													</p:inputText>


													<p:outputLabel for="txtTonAzucarHaMes"
														value="Ton.Az/Ha/Mes " style="font-size: 0.8em;" />
													<p:panelGrid columns="2">
														<p:inputText id="txtTonAzucarHaMes"
															style="font-size: 0.8em;" size="8"
															binding="#{datTransProdView.txtTonAzucarHaMes}"
															disable="true">
															<f:converter converterId="javax.faces.Double" />
														</p:inputText>
														<p:commandButton icon="ui-icon-calculator"
															value="Calcular">
															<p:ajax
																process="@this, txtPorcRendimiento, txtCantidadCosechadaHaMes"
																update="txtTonAzucarHaMes"
																listener="#{datTransProdView.listener_calcularTonAzucarHaMes}" />
														</p:commandButton>
													</p:panelGrid>

													<p:outputLabel></p:outputLabel>
													<p:outputLabel></p:outputLabel>


												</h:panelGrid>
											</p:column>


										</p:row>
									</p:panelGrid>
									<h:panelGrid>
										<p:outputLabel for="txtFinCosecha" value="Fin de cosecha: "
											style="font-size: 0.8em;" />
										<p:selectOneRadio id="txtFinCosecha" disabled="true"
											style="font-size: 0.8em;"
											binding="#{datTransProdView.txtFinCosecha}" required="false"
											requiredMessage="Seleccione un estado">
											<f:selectItem itemLabel="Sí" itemValue="Si" />
											<f:selectItem itemLabel="No" itemValue="No" />
										</p:selectOneRadio>




									</h:panelGrid>

									<h:panelGrid columns="2" id="PanelGrid6" cellpadding="5">

										<f:facet name="header">

											<p:commandButton id="btnAgregarNivel4"
												icon="ui-icon-plusthick"
												binding="#{datTransProdView.btnAgregarNivel4}"
												value="Agregar" process="@all"
												action="#{datTransProdView.action_agregarNivel4()}"
												update="tablaDetTransNivel4 :dialogDatTransProd" />

											<p:commandButton id="btnlimpiar1" process="@this"
												icon="ui-icon-trash" value="Limpiar">
												<p:ajax update="gridDetTransProdNivel4" resetValues="true" />
											</p:commandButton>
										</f:facet>

									</h:panelGrid>

									<p:scrollPanel mode="native" style="width:900px;height:250px">
										<p:outputPanel>

											<p:dataTable id="tablaDetTransNivel4"
												value="#{datTransProdView.dataDetTransNivel4}"
												var="listaDetTransNivel4" paginator="true" rows="2"
												rowsPerPageTemplate="5,10,15" editable="true" editMode="cell" 
												widgetVar="cellProd" reflow="true">
												
												<p:ajax event="cellEdit" listener="#{datTransProdView.onCellEditProd}" />

												<p:column headerText="Hacienda" style="font-size: 0.9em;">
													<p:cellEditor>
														<f:facet name="output">
															<h:outputText value="#{listaDetTransNivel4.nombreNivel2}"
																style="font-size: 0.9em;" />
														</f:facet>
														<f:facet name="input">
															<h:selectOneMenu
																value="#{listaDetTransNivel4.nivel2Id_Nivel2.nivel2Id}">
																<f:selectItems value="#{datTransProdView.selectNivel2Edit}"
																var="var1" itemValue="#{var1}"></f:selectItems>
															</h:selectOneMenu>
														</f:facet>
													</p:cellEditor>
												</p:column>


												<p:column headerText="Lote" style="font-size: 0.9em;">
													<p:cellEditor>
														<f:facet name="output">
															<h:outputText value="#{listaDetTransNivel4.nombreNivel4}"
																style="font-size: 0.9em;" />
														</f:facet>
														<f:facet name="input">
															<h:selectOneMenu
																value="#{listaDetTransNivel4.nivel4Id_Nivel4.nivel4Id}">
																<f:selectItems value="#{datTransProdView.selectNivel4Edit}"
																var="var2" itemValue="#{var2}"></f:selectItems>
															</h:selectOneMenu>
														</f:facet>
													</p:cellEditor>
												</p:column>

												<p:column headerText="Variedad" style="font-size: 0.9em;">
													<p:cellEditor>
														<f:facet name="output">
															<h:outputText
																value="#{listaDetTransNivel4.nombreVariedad}"
																style="font-size: 0.9em;" />
														</f:facet>
														<f:facet name="input">
															<h:selectOneMenu
																value="#{listaDetTransNivel4.variedNivel4.variedId}">
																<f:selectItems value="#{datTransProdView.selectItemVariedad}"
																var="var3" itemValue="#{var3}"></f:selectItems>
															</h:selectOneMenu>
														</f:facet>
													</p:cellEditor>
												</p:column>

												<p:column headerText="N. Cortes" style="font-size: 0.9em;">
													<p:cellEditor>
														<f:facet name="output">
															<h:outputText value="#{listaDetTransNivel4.nombreEtapa}"
																style="font-size: 0.9em;" />
														</f:facet>
														<f:facet name="input">
															<h:selectOneMenu
																value="#{listaDetTransNivel4.etapaNivel4.etapaId}">
																<f:selectItems value="#{datTransProdView.selectItemEtapa}"
																var="var4" itemValue="#{var4}"></f:selectItems>
															</h:selectOneMenu>
														</f:facet>
													</p:cellEditor>
												</p:column>


												<p:column headerText="Área Cos" style="font-size: 0.9em;">
													<p:cellEditor>
														<f:facet name="output">
															<h:outputText
																value="#{listaDetTransNivel4.areaCosechada}"
																style="font-size: 0.9em;">
																<f:convertNumber pattern="#0.00" />
															</h:outputText>
														</f:facet>
														<f:facet name="input">
															<p:inputText value="#{listaDetTransNivel4.areaCosechada}" />
														</f:facet>
													</p:cellEditor>
												</p:column>

												<p:column headerText="Tons" style="font-size: 0.9em;">
													<p:cellEditor>
														<f:facet name="output">
															<h:outputText
																value="#{listaDetTransNivel4.cantidadCosechada}"
																style="font-size: 0.9em;">
																<f:convertNumber pattern="#0.00" />
															</h:outputText>
														</f:facet>
														<f:facet name="input">
															<p:inputText
																value="#{listaDetTransNivel4.cantidadCosechada}" />
														</f:facet>
													</p:cellEditor>
												</p:column>

												<p:column headerText="TON/HA" style="font-size: 0.9em;">
													<p:cellEditor>
														<f:facet name="output">
															<h:outputText
																value="#{listaDetTransNivel4.cantidadCosechadaHa}"
																style="font-size: 0.9em;">
																<f:convertNumber pattern="#0.00" />
															</h:outputText>
														</f:facet>
														<f:facet name="input">
															<p:inputText
																value="#{listaDetTransNivel4.cantidadCosechadaHa}" />
														</f:facet>
													</p:cellEditor>
												</p:column>
												
													<p:column headerText="Edad" style="font-size: 0.9em;">
													<p:cellEditor>
														<f:facet name="output">
															<h:outputText
																value="#{listaDetTransNivel4.edadNivel4}"
																style="font-size: 0.9em;">
																<f:convertNumber pattern="#0.00" />
															</h:outputText>
														</f:facet>
														<f:facet name="input">
															<p:inputText value="#{listaDetTransNivel4.edadNivel4}" />
														</f:facet>
													</p:cellEditor>
												</p:column>

												<p:column headerText="TCHM" style="font-size: 0.9em;">
													<p:cellEditor>
														<f:facet name="output">
															<h:outputText
																value="#{listaDetTransNivel4.cantidadCosechadaHaMes}"
																style="font-size: 0.9em;">
																<f:convertNumber pattern="#0.00" />
															</h:outputText>
														</f:facet>
														<f:facet name="input">
															<p:inputText
																value="#{listaDetTransNivel4.cantidadCosechadaHaMes}" />
														</f:facet>
													</p:cellEditor>
												</p:column>


												<p:column headerText="Cliente" style="font-size: 0.9em;">
													<p:cellEditor>
														<f:facet name="output">
															<h:outputText value="#{listaDetTransNivel4.nomClienteId}"
																style="font-size: 0.9em;">
																<f:convertNumber pattern="#0.00" />
															</h:outputText>
														</f:facet>
														<f:facet name="input">
															<h:selectOneMenu
																value="#{listaDetTransNivel4.clienteId.persEmprId}">
																<f:selectItems value="#{datTransProdView.selectCliente}"
																var="var5" itemValue="#{var5}"></f:selectItems>
															</h:selectOneMenu>
														</f:facet>
													</p:cellEditor>
												</p:column>

												<p:column headerText="No. Viajes" style="font-size: 0.9em;">
													<p:cellEditor>
														<f:facet name="output">
															<h:outputText value="#{listaDetTransNivel4.numeroViajes}"
																style="font-size: 0.9em;">
																<f:convertNumber pattern="#0.00" />
															</h:outputText>
														</f:facet>
														<f:facet name="input">
															<p:inputText value="#{listaDetTransNivel4.numeroViajes}" />
														</f:facet>
													</p:cellEditor>
												</p:column>

											<!-- 	<p:column headerText="Vagón" style="font-size: 0.9em;">
														<f:facet name="output">
															<h:outputText value="#{listaDetTransNivel4.nombreVagon}"
																style="font-size: 0.9em;">
																<f:convertNumber pattern="#0.00" />
															</h:outputText>
														</f:facet>
														<f:facet name="input">
															<h:selectOneMenu
																value="#{listaDetTransNivel4.vagonId.equipoId}">
																<f:selectItems value="#{datTransProdView.selectVagon}"
																var="var6" itemValue="#{var6}"></f:selectItems>
															</h:selectOneMenu>
														</f:facet>
												</p:column>  -->

												<f:attribute name="selectedDatTransNivel4"
																value="#{listaDetTransNivel4}" />
												
												<p:column headerText="Opciones">
													<div align="center">
														<p:commandButton id="btnDelete" icon="ui-icon-trash"
															actionListener="#{datTransProdView.actionDeleteDatTransProdNivel4}"
															required="false" title="Borrar"
															onclick="if(!confirm('Realmente desea borrar este registro?')){return false;}"
															update="tablaDetTransNivel4 :dialogDatTransProd">
															<f:attribute name="selectedDatTransNivel4"
																value="#{listaDetTransNivel4}" />
														</p:commandButton>

													</div>
												</p:column>

											</p:dataTable>
										</p:outputPanel>
									</p:scrollPanel>
								</p:tab>



							</p:tabView>

						</p:panel>
						<p:panel id="panelBotones">
							<div align="center">
								<p:commandButton id="btnSave" icon="ui-icon-disk"
									binding="#{datTransProdView.btnSave}" value="Grabar"
									action="#{datTransProdView.action_save()}"
									update=":dialogDatTransProd :frm:panelDataTableDatTransProd" />
								<p:commandButton id="btnClear" icon="ui-icon-trash"
									value="Limpiar" action="#{datTransProdView.action_clear()}"
									process="@this" update=":dialogDatTransProd " />
							</div>
						</p:panel>
					</h:form>
				</p:dialog>

				<!-- Formulario anulacion -->

				<p:dialog id="dialogAnularReg" appendTo="@(body)" draggable="true"
					closable="true" resizable="flase"
					visible="#{datTransProdView.showDialog}" modal="true" width="500">

					<h:form id="formDialogAnularReg">
						<p:messages id="msg" showDetail="true" autoUpdate="true"
							closable="true">
							<p:effect type="pulsate" event="load" delay="400" />
						</p:messages>
						<p:panel id="panelAnularReg" header="Anulación de Registro">
							<h:panelGrid columns="3" cellpadding="5">

								<p:outputLabel for="txtobservacionAnularReg"
									value="Observación: " />
								<p:inputTextarea id="txtobservacionAnularReg"
									binding="#{datTransProdView.txtObservacionAnularReg}" rows="5"
									cols="30" counter="display" maxlength="500"
									counterTemplate="{0} Caracteres." autoResize="true"
									required="true" requiredMessage="La Observavión es Obligatoria" />
								<h:outputText id="display" />

							</h:panelGrid>
						</p:panel>
						<p:panel id="panelBotones">
							<div align="center">
								<p:commandButton id="btnSave" icon="ui-icon-disk"
									disabled="false" binding="#{datTransProdView.btnDelete}"
									value="Grabar"
									action="#{datTransProdView.action_saveAnularReg()}"
									update=":dialogAnularReg :formDialogAnularReg:panelAnularReg :frm:panelDataTableDatTransProd" />
								<p:commandButton id="btnClear" icon="ui-icon-trash"
									value="Limpiar" action="#{datTransProdView.action_clear()}"
									process="@this" update=":dialogAnularReg" />
							</div>
						</p:panel>
					</h:form>
				</p:dialog>

			</f:view>
		</ui:define>
	</ui:composition>
</h:body>
</html>
